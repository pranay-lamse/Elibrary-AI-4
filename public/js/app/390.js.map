{"version":3,"file":"js/app/390.js","mappings":"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","sources":["webpack:///./resources/pos/src/member/components/E-books/ebook.scss?2cac","webpack:///./resources/pos/src/member/components/E-books/Ebooks.js","webpack:///./resources/pos/src/member/components/E-books/ebook.scss"],"sourcesContent":["import api from \"!../../../../../../node_modules/laravel-mix/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[1]!../../../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[2]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[3]!./ebook.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import React, { useEffect, useState } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport HeaderTitle from \"../../../shared/header-title/HeaderTitle\";\r\nimport ReactDataTable from \"../../../shared/table/ReactDataTable\";\r\nimport ProgressBar from \"../../../shared/progress-bar/ProgressBar\";\r\nimport {\r\n    getCurrentMember,\r\n    getFormattedMessage,\r\n    getFormattedOptions,\r\n} from \"../../../shared/sharedMethod\";\r\n/* import { fetchEBookRequests } from \"../../store/actions/ebookAction\"; */\r\nimport { fetchEbookSubscription } from \"../../store/actions/ebookSubscriptionAction\";\r\nimport { icon, Tokens } from \"../../../constants\";\r\nimport \"./ebook.scss\";\r\nimport PDFviewerModal from \"../../../components/book-details/PDFviewerModal\";\r\nimport moment from \"moment\";\r\nimport { useLocation, useNavigate } from \"react-router\";\r\n\r\nconst Ebooks = (props) => {\r\n    const {\r\n        /* ebooks, */\r\n        ebookSubscription,\r\n        isLoading,\r\n        /* fetchEBookRequests, */\r\n        fetchEbookSubscription,\r\n        totalRecordMember,\r\n    } = props;\r\n\r\n    const [modal, setModal] = useState(false);\r\n    const [filePath, setFilePath] = useState(\"\");\r\n    const [isSpinner, setIsSpinner] = useState(true);\r\n    const member = getCurrentMember();\r\n\r\n    const location = useLocation();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        /* fetchEBookRequests(); */\r\n    }, [location.pathname]);\r\n\r\n    const toggle = () => setModal(!modal);\r\n    /*  const handleRead = () => {\r\n        setModal(!modal);\r\n        const ebook =\r\n            ebookSubscription.length > 0 &&\r\n            ebooks.length > 0 &&\r\n            ebookSubscription.filter((ebook, i) =>\r\n                ebookSubscription.find((esub) =>\r\n                    ebook.id === esub.ebook_id ? ebook : null\r\n                )\r\n            );\r\n    }; */\r\n\r\n    const onChange = (filter) => {\r\n        /* fetchEBookRequests(filter, true); */\r\n        fetchEbookSubscription(member.id);\r\n    };\r\n\r\n    const onClickBookDownload = (e_book_url) => {\r\n        const api =\r\n            e_book_url + \"?token=\" + localStorage.getItem(Tokens.MEMBER);\r\n        window.open(api, \"_blank\");\r\n    };\r\n    const itemsValue = ebookSubscription.length\r\n        ? ebookSubscription.toReversed()\r\n        : [];\r\n\r\n    console.log(\"iitemsValue\", itemsValue);\r\n    const columns = [\r\n        /* {\r\n            sortable: true,\r\n            wrap: true,\r\n            selector: (row) =>\r\n                row.book_item.book ? row.book_item.book.library_id : \"N/A\",\r\n            name: \"LIBRARY\",\r\n            cell: (row) =>\r\n                row.book_item.book\r\n                    ? libraryStatus.find(\r\n                          (status) =>\r\n                              row.book_item.book.library_id === status.id\r\n                      ).name\r\n                    : \"N/A\",\r\n        }, */\r\n\r\n        {\r\n            name: getFormattedMessage(\"e-books.input.name.label\"),\r\n            selector: (row) => row.name,\r\n            sortable: true,\r\n            cell: (row) => <span className=\"book-name\">{row.name}</span>,\r\n        },\r\n        {\r\n            name: getFormattedMessage(\"e-books.input.isbn.label\"),\r\n            selector: (row) => row.isbn_no,\r\n\r\n            sortable: true,\r\n            cell: (row) => <span>{row.isbn_no}</span>,\r\n        },\r\n\r\n        /* {\r\n            name: getFormattedMessage(\"e-books.input.language.label\"),\r\n            selector: (row) => row.language_name,\r\n            sortable: true,\r\n            cell: (row) => <span>{row.language_name}</span>,\r\n        }, */\r\n        {\r\n            name: getFormattedMessage(\"e-books.input.author.label\"),\r\n            selector: (row) => row.authors,\r\n\r\n            sortable: true,\r\n            cell: (row) => <span>{row.authors}</span>,\r\n        },\r\n        // {\r\n        //     name: \"EXPIRY DATE\",\r\n        //     selector: (row) => row.returned_on,\r\n        //     width: \"300px\",\r\n        //     sortable: true,\r\n        //     cell: (row) => <span>{row.returned_on}</span>,\r\n        // },\r\n\r\n        {\r\n            sortable: true,\r\n            wrap: true,\r\n            selector: (row) => row.library_id,\r\n            name: \"LIBRARY\",\r\n            cell: (row) =>\r\n                row.library_id == 111 ? (\r\n                    <span className=\"text-wrap text-center\">\r\n                        Dindayal Upadhyay Digital Library\r\n                    </span>\r\n                ) : row.library_id == 222 ? (\r\n                    <span className=\"text-wrap text-center\">\r\n                        Kundanlal Gupta Digital Library\r\n                    </span>\r\n                ) : (\r\n                    <span className=\"text-wrap text-center\">\r\n                        Rashtramata Kasturba Digital Library\r\n                    </span>\r\n                ),\r\n        },\r\n        {\r\n            name: \"Action\",\r\n            selector: (row) => row.authors,\r\n\r\n            sortable: true,\r\n            cell: (row) => (\r\n                <Button\r\n                    size=\"sm\"\r\n                    color=\"danger text-white\"\r\n                    onClick={(e) => {\r\n                        setFilePath(row.file_name);\r\n                        row.format === 3\r\n                            ? navigate(\"/view-book/\" + row.file_name)\r\n                            : toggle();\r\n                    }}\r\n                >\r\n                    Read\r\n                </Button>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    const pdfModalOptions = {\r\n        modal,\r\n        toggle,\r\n        filePath: filePath,\r\n    };\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => setIsSpinner(false), 500);\r\n    }, []);\r\n\r\n    return (\r\n        <section className=\"member_ebooks\">\r\n            <div className=\"container\">\r\n                <div className=\"animated fadeIn\">\r\n                    <div className=\"section-title-center text-center\">\r\n                        <h2 className=\"display-6\">\r\n                            {getFormattedMessage(\"e-book.title\")}\r\n                        </h2>\r\n                        <div className=\"section-divider divider-traingle\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"common-container\">\r\n                        <ReactDataTable\r\n                            items={itemsValue}\r\n                            // items={ebooks}\r\n                            className={\"table-bordered table-striped mt-2\"}\r\n                            columns={columns}\r\n                            loading={isLoading}\r\n                            totalRows={itemsValue.length}\r\n                            emptyStateMessageId=\"e-book.empty-state.title\"\r\n                            emptyNotFoundStateMessageId=\"e-books.not-found.empty-state.title\"\r\n                            onChange={onChange}\r\n                            icon={icon.BOOK}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <PDFviewerModal {...pdfModalOptions} />\r\n        </section>\r\n    );\r\n};\r\n\r\nEbooks.propTypes = {\r\n    /* ebooks: PropTypes.array, */\r\n    isLoading: PropTypes.bool,\r\n    /* fetchEBookRequests: PropTypes.func, */\r\n    totalRecordMember: PropTypes.number,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const { /* ebooks, */ isLoading, totalRecordMember, ebookSubscription } =\r\n        state;\r\n    return {\r\n        /* ebooks, */\r\n        ebookSubscription,\r\n        isLoading,\r\n        totalRecordMember,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    /* fetchEBookRequests, */\r\n    fetchEbookSubscription,\r\n})(Ebooks);\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".book-name{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/pos/src/member/components/E-books/ebook.scss\"],\"names\":[],\"mappings\":\"AAEA,WACI,cADJ\",\"sourcesContent\":[\"@import \\\"../../../scss/variables\\\";\\r\\n\\r\\n.book-name {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","locals","Ebooks","props","ebookSubscription","isLoading","fetchEbookSubscription","_useState2","totalRecordMember","_slicedToArray","useState","modal","setModal","_useState4","filePath","setFilePath","_useState6","setIsSpinner","member","getCurrentMember","location","useLocation","navigate","useNavigate","useEffect","pathname","toggle","itemsValue","length","toReversed","console","log","columns","name","getFormattedMessage","selector","row","sortable","cell","_jsx","className","children","isbn_no","authors","wrap","library_id","Button","size","color","onClick","e","file_name","format","pdfModalOptions","setTimeout","_jsxs","ReactDataTable","items","loading","totalRows","emptyStateMessageId","emptyNotFoundStateMessageId","onChange","filter","id","icon","BOOK","PDFviewerModal","_objectSpread","propTypes","PropTypes","connect","state","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}