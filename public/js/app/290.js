"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[290],{95290:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});var r=o(67294),n=o(14416),i=o(45697),u=o.n(i),c=o(97975),l=o(72446),a=o.n(l),s=o(82923),b={insert:"head",singleton:!1},f=(a()(s.Z,b),s.Z.locals,o(775)),m=o(24159),d=o(54769),y=o(42446),p=o(66724),v=o(92715),g=o(48521);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function j(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){O(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function O(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var w=function(e){var t=e.bookHistory,o=e.onOpenModal,r=e.onChangeFilter,n=e.totalRecordMember,i=e.isLoading,u=[{sortable:!0,wrap:!0,selector:function(e){var t,o;return null!==(t=e.book_item)&&void 0!==t&&t.book?null===(o=e.book_item)||void 0===o?void 0:o.book.name:"N/A"},name:(0,m.PB)("books.select.book.label"),cell:function(e){var t,o;return null!==(t=e.book_item)&&void 0!==t&&t.book?null===(o=e.book_item)||void 0===o?void 0:o.book.name:"N/A"}},{sortable:!0,selector:function(e){return function(e){var t,o;return null!==(t=e.book_item)&&void 0!==t&&t.book_code?null===(o=e.book_item)||void 0===o?void 0:o.book_code:"N/A"}},name:(0,m.PB)("book-history.table.book-code.column"),cell:function(e){var t;return null===(t=e.book_item)||void 0===t?void 0:t.book_code}},{sortable:!0,selector:function(e){return e.issued_on?e.issued_on:"N/A"},name:(0,m.PB)("book-history.table.issue-date.column"),cell:function(e){return(0,g.jsx)("span",{children:e.issued_on?s(e.issued_on):"N/A"})}},{sortable:!0,selector:function(e){return e.issued_on?e.issued_on:"N/A"},name:(0,m.PB)("Due Date"),cell:function(e){return(0,g.jsxs)("span",{children:[e.issued_on?(0,m.vh)(new Date(new Date(e.issued_on).setDate(new Date(e.issued_on).getDate()+15))):"N/A"," "]})}},{sortable:!0,selector:function(e){return e.return_date?e.return_date:"N/A"},name:(0,m.PB)("book-history.table.return-date.column"),cell:function(e){return(0,g.jsx)("span",{children:e.return_date?s(e.return_date):"N/A"})}},{sortable:!0,selector:function(e){return e.status?e.status:"N/A"},name:(0,m.PB)("react-data-table.status.column"),cell:function(e){return l(e)}},{sortable:!0,wrap:!0,selector:function(e){var t,o;return null!==(t=e.book_item)&&void 0!==t&&t.book?null===(o=e.book_item)||void 0===o?void 0:o.book.library_id:"N/A"},name:"LIBRARY",cell:function(e){var t;return null!==(t=e.book_item)&&void 0!==t&&t.book?v.find((function(t){var o;return(null===(o=e.book_item)||void 0===o?void 0:o.book.library_id)===t.value})).label:"N/A"}},{name:(0,m.PB)("react-data-table.action.column"),selector:function(e){return e.id?e.id:"N/A"},ignoreRowClick:!0,allowOverflow:!0,button:!0,center:!0,cell:function(e){return a(e)}}],l=function(e){var t={status:e.status,item:e};return(0,g.jsx)(d.Z,j(j({},t),{},{item:e}))},a=function(e){return e.status===f.OI.BOOK_RESERVED?(0,g.jsx)(c.Z,{className:"frontend-btn",size:"sm",color:"danger text-white",onClick:function(t){t.stopPropagation(),o(e)},children:(0,m.PB)("book-history.input.unreserve-btn.label")}):""},s=function(e){return(0,g.jsx)("span",{children:e?(0,m.vh)(e):""})};return(0,g.jsx)(y.Z,{items:t,columns:u,emptyStateMessageId:"books-history.empty-state.title",emptyNotFoundStateMessageId:"books-history.not-found.empty-state.title",loading:i,className:"table-bordered table-striped mt-2",totalRows:n,onChange:r,icon:p.qv.BOOK_CIRCULATION,pagination:(null==t?void 0:t.length)>=10})};w.propTypes={bookHistory:u().array,totalRecordMember:u().number,isLoading:u().bool,onOpenModal:u().func,onChangeFilter:u().func};var P=w,S=o(18742),_=o(84936),x=o(69474);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function N(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?N(Object(o),!0).forEach((function(t){D(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function D(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var R=function(e){var t=e.bookHistory,o=e.unReserveBook,n=e.toggleModal,i=t?t.book_item.book.name:"",u=t?t.book_item.book_code:"",c=(0,g.jsxs)(g.Fragment,{children:[" ",(0,m.PV)("book-history.modal.message"),' "',"".concat(i," (").concat(u,")"),'"']}),l=(0,m.PV)("book-history.modal.title"),a=(0,r.useCallback)((function(){o(t.book_item.id,t.book_item.book.library_id)}),[t]);return(0,g.jsx)(S.Z,C(C({},e),{},{actions:(0,g.jsx)(_.Z,{onConfirm:a,onCancel:n}),content:c,title:l}))};R.propTypes={bookHistory:u().object,unReserveBook:u().func,toggleModal:u().func};var B=(0,n.$j)(null,{unReserveBook:x._})(R),M=(o(10646),o(74819),o(69608)),I=o(89250);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function H(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function T(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?H(Object(o),!0).forEach((function(t){L(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function L(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,u,c=[],l=!0,a=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(r=i.call(o)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){a=!0,n=e}finally{try{if(!l&&null!=o.return&&(u=o.return(),Object(u)!==u))return}finally{if(a)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var V=function(e){var t=Z((0,r.useState)(null),2),o=t[0],n=t[1],i=e.bookHistory,u=e.fetchBooksHistory,c=e.isLoading,l=e.toggleModal,a=e.totalRecordMember,s=(0,I.TH)(),b=Z((0,r.useState)(!0),2),f=(b[0],b[1]),d={bookHistory:o,toggleModal:l};(0,r.useEffect)((function(){u()}),[s.pathname]),(0,r.useEffect)((function(){setTimeout((function(){return f(!1)}),1500)}),[]);var y={bookHistory:i,onOpenModal:function(){n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),l()},onChangeFilter:function(e){u(e)},totalRecordMember:a,isLoading:c};return(0,g.jsxs)("section",{className:"member_books_history",children:[(0,g.jsx)("div",{className:"container",children:(0,g.jsxs)("div",{className:"animated fadeIn",children:[(0,g.jsxs)("div",{className:"section-title-center text-center",children:[(0,g.jsx)("h2",{className:"display-6",children:(0,m.PV)("book-history.title")}),(0,g.jsx)("div",{className:"section-divider divider-traingle"})]}),i?(0,g.jsx)("div",{className:"common-container",children:(0,g.jsx)(P,T({},y))}):(0,g.jsx)("div",{className:"spinner",children:(0,g.jsx)("img",{src:"/public/images/301.gif"})})]})}),(0,g.jsx)(B,T({},d))]})};V.propTypes={history:u().object,bookHistory:u().array,totalRecordMember:u().number,isLoading:u().bool,fetchBooksHistory:u().func,toggleModal:u().func};var $=(0,n.$j)((function(e){return{bookHistory:e.bookHistory,isLoading:e.isLoading,totalRecordMember:e.totalRecordMember}}),{fetchBooksHistory:x.z,toggleModal:M.$})(V)},82923:function(e,t,o){var r=o(27897),n=o.n(r),i=o(1519),u=o.n(i)()(n());u.push([e.id,".book-name{max-width:650px}.book-action{width:90px}.book-return-date{width:100px}","",{version:3,sources:["webpack://./resources/pos/src/member/components/book-history/BookHistory.scss"],names:[],mappings:"AACI,WACI,eAAR,CAGI,aACI,UADR,CAII,kBACI,WAFR",sourcesContent:[".book {\r\n    &-name {\r\n        max-width: 650px;\r\n    }\r\n\r\n    &-action {\r\n        width: 90px;\r\n    }\r\n\r\n    &-return-date {\r\n        width: 100px;\r\n    }\r\n}\r\n"],sourceRoot:""}]),t.Z=u}}]);
//# sourceMappingURL=290.js.map